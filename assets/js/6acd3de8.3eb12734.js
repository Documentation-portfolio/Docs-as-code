"use strict";(globalThis.webpackChunkdocs_as_code_temp=globalThis.webpackChunkdocs_as_code_temp||[]).push([[375],{123:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"workflow","title":"CI/CD Pipeline Workflow","description":"---","source":"@site/docs/workflow.mdx","sourceDirName":".","slug":"/workflow","permalink":"/Docs-as-code/docs/workflow","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var t=s(4848),i=s(8453);const r={},l="CI/CD Pipeline Workflow",d={},c=[{value:"id: workflow\ntitle: CI/CD Pipeline Workflow\nsidebar_label: Workflow",id:"id-workflowtitle-cicd-pipeline-workflowsidebar_label-workflow",level:2},{value:"Workflow Overview",id:"workflow-overview",level:3},{value:"Workflow Triggers",id:"workflow-triggers",level:3},{value:"Examples",id:"examples",level:5},{value:"Workflow Structure: Jobs and Dependencies",id:"workflow-structure-jobs-and-dependencies",level:3},{value:"Workflow Execution Details",id:"workflow-execution-details",level:3},{value:"Key Concepts",id:"key-concepts",level:5},{value:"Key Concepts",id:"key-concepts-1",level:5},{value:"Key Concepts",id:"key-concepts-2",level:5},{value:"Advanced Workflow Features",id:"advanced-workflow-features",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h5:"h5",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"cicd-pipeline-workflow",children:"CI/CD Pipeline Workflow"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"id-workflowtitle-cicd-pipeline-workflowsidebar_label-workflow",children:"id: workflow\ntitle: CI/CD Pipeline Workflow\nsidebar_label: Workflow"}),"\n",(0,t.jsxs)(n.p,{children:["The purpose of this document is to outline the workflow of the Continuous Integration and Continuous Deployment (CI/CD) pipeline for a sample application, defined in the GitHub Actions workflow file: ",(0,t.jsx)(n.code,{children:"ci-cd.yml"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"workflow-overview",children:"Workflow Overview"}),"\n",(0,t.jsxs)(n.p,{children:["A workflow is an automated process that can run one or more jobs. A workflow runs when triggered mannually, at a scheduled time, or by an event in your repository. You can configure and set up a workflow in a repository to build, test, package, release, or deply a project on GitHub.\nCreate a ",(0,t.jsx)(n.code,{children:".yaml"})," file to define your workflow configuration and save the workflow in the ",(0,t.jsx)(n.code,{children:".github/workflows"})," directory in your repository."]}),"\n",(0,t.jsx)(n.p,{children:"You can have multiple workflows in your repository to automate tasks such as build and test a pull request, or deploy an application every time a release is created."}),"\n",(0,t.jsx)(n.h3,{id:"workflow-triggers",children:"Workflow Triggers"}),"\n",(0,t.jsx)(n.p,{children:"A workflow trigger is an event that causes a workflow to execute."}),"\n",(0,t.jsx)(n.h5,{id:"examples",children:"Examples"}),"\n",(0,t.jsxs)(n.p,{children:["The following workflow runs when a ",(0,t.jsx)(n.code,{children:"push"})," event targets a branch named ",(0,t.jsx)(n.code,{children:"main"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"on:\n  push:\n    branches: [ main ]\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The following workflow runs when a ",(0,t.jsx)(n.code,{children:"pull_request"})," event targets a branch named ",(0,t.jsx)(n.code,{children:"main"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"on:\n  pull_request:\n    branches: [ main ]\n"})}),"\n",(0,t.jsx)(n.h3,{id:"workflow-structure-jobs-and-dependencies",children:"Workflow Structure: Jobs and Dependencies"}),"\n",(0,t.jsxs)(n.p,{children:["A workflow consists of one or more jobs that run in parallel by default. The CI/CD pipeline uses dependencies to ensure sequential execution of the workflow jobs. The sequencing of jobs is defined through ",(0,t.jsx)(n.code,{children:"needs:"}),"."]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Job Name"}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.code,{children:"runs-on"})}),(0,t.jsx)(n.th,{children:"Dependencies (needs)"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"build"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ubuntu-latest"})}),(0,t.jsx)(n.td,{children:"None"}),(0,t.jsx)(n.td,{children:"Compiles the code and creates an artifact."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"test"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ubuntu-latest"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"build"})}),(0,t.jsx)(n.td,{children:"Runs unit and integration tests against the built code."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"deploy"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ubuntu-latest"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"test"})}),(0,t.jsx)(n.td,{children:"Pushes the validated artifact to the staging environment."})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"workflow-execution-details",children:"Workflow Execution Details"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Job 1"}),": ",(0,t.jsx)(n.code,{children:"build"}),"\nSets up the enviornment, installs dependencies, and compiles the application.\nThe final step of the job uses action to save the compipled code for use in subsequent jobs."]}),"\n",(0,t.jsx)(n.h5,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Uses ",(0,t.jsx)(n.code,{children:"actions/checkout@v4"})," to pull source code"]}),"\n",(0,t.jsxs)(n.li,{children:["Uses ",(0,t.jsx)(n.code,{children:"actions/setup-node@v4"})," to configure Node.js"]}),"\n",(0,t.jsxs)(n.li,{children:["Uses ",(0,t.jsx)(n.code,{children:"upload-artifact"})," to saves build output as an artifact ",(0,t.jsx)(n.code,{children:"upload-artifact"})]}),"\n",(0,t.jsxs)(n.li,{children:["Produces compiled build files under ",(0,t.jsx)(n.code,{children:"dist/"})]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"jobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n      - name: Install dependencies\n        run: npm ci\n      - name: Build application\n        run: npm run build\n      - name: Upload Build Artifact\n        uses: actions/upload-artifact@v4\n        with:\n          name: app-dist\n          path: dist/ # Path to the compiled output directory\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Job 2"}),": ",(0,t.jsx)(n.code,{children:"test"}),"\nConsumes the artifact from the ",(0,t.jsx)(n.code,{children:"build"})," job and runs tests against the compiled code."]}),"\n",(0,t.jsx)(n.h5,{id:"key-concepts-1",children:"Key Concepts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Uses ",(0,t.jsx)(n.code,{children:"needs: build"})," to enforce ordering"]}),"\n",(0,t.jsxs)(n.li,{children:["Downloads artifact using ",(0,t.jsx)(n.code,{children:"download-artifact"})]}),"\n",(0,t.jsx)(n.li,{children:"Tests run against build output intended for deployment"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"test:\n  needs: build\n  runs-on: ubuntu-latest\n  steps:\n    - uses: actions/checkout@v4\n\n    - name: Download Build Artifact\n      uses: actions/download-artifact@v4\n      with:\n        name: app-dist\n\n    - name: Run Unit Tests\n      run: npm test -- --coverage\n\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Job 3"}),": ",(0,t.jsx)(n.code,{children:"deploy"}),"\nDeployment occurs only when:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The workflow event is ",(0,t.jsx)(n.code,{children:"push"})]}),"\n",(0,t.jsxs)(n.li,{children:["The branch is ",(0,t.jsx)(n.code,{children:"main"})]}),"\n",(0,t.jsx)(n.li,{children:"All previous jobs are successful"}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"key-concepts-2",children:"Key Concepts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Uses ",(0,t.jsx)(n.code,{children:"if"})," conditions to prevent PR deployments"]}),"\n",(0,t.jsxs)(n.li,{children:["Deploys to a protected GitHub environment (",(0,t.jsx)(n.code,{children:"Staging"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Uses secret ",(0,t.jsx)(n.code,{children:"DEPLOY_KEY"})," for secure authentication"]}),"\n",(0,t.jsx)(n.li,{children:"Downloads the artifact generated from the build job"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"deploy:\n  if: github.event_name == 'push' && github.ref == 'refs/heads/main'\n  needs: test\n  runs-on: ubuntu-latest\n  environment: Staging\n  steps:\n    - name: Download Artifact for Deployment\n      uses: actions/download-artifact@v4\n      with:\n        name: app-dist\n\n    - name: Deploy to Staging\n      run: |\n        ./deploy-script.sh --api-key ${{ secrets.DEPLOY_KEY }}\n        echo \"Deployment to staging complete!\"\n"})}),"\n",(0,t.jsx)(n.h3,{id:"advanced-workflow-features",children:"Advanced Workflow Features"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Artifact Management"}),"\nArtifacts ensure consistency as the build job, the test job, and the deploy job use the same compiled output."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Sequential Job Execution"}),"\n",(0,t.jsx)(n.code,{children:"needs:"})," enforces strict pipeline flow."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Status Reporting"}),"\nAfter execution, the final status of the workflow (Success, Failure, Cancelled) appears on ",(0,t.jsx)(n.strong,{children:"Pull Requests"}),", ",(0,t.jsx)(n.strong,{children:"Commit"})," history, or ",(0,t.jsx)(n.strong,{children:"Actions"})," dashboard."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var o=s(6540);const t={},i=o.createContext(t);function r(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);